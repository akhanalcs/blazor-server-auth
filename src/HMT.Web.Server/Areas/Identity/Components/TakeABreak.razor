@using Microsoft.AspNetCore.Components.Server.ProtectedBrowserStorage
@using System.Security.Claims
@inject ProtectedSessionStorage ProtectedSessionStore

@inject IDbContextFactory<HMTDbContext> DbContextFactory

@inject NavigationManager Navigation

<a href="" @onclick="ClockOutForABreakAsync"><span class="oi oi-clock">Break</span></a>

@code{
    
    [CascadingParameter] private Task<AuthenticationState> authenticationStateTask { get; set; }

    private async Task ClockOutForABreakAsync()
    {
        var empId = (await authenticationStateTask).User.FindFirstValue("NewClaim");


        //var empTimeId = await ProtectedSessionStore.GetAsync<string>($"{user.Identity.Name}-EmpTimeId");
        //using var dbContext = DbContextFactory.CreateDbContext();
        //dbContext.Database.ExecuteSqlInterpolated($"EXECUTE dbo.SomeSPName {empId}");
        //Navigation.NavigateTo("Identity/Account/Logout?returnUrl=%2F", true);
    }
}